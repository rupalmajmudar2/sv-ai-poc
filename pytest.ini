# pytest configuration for SportzVillage AI
# This configuration supports the LangGraph migration and continuous testing

[tool:pytest]
# Test discovery
testpaths = tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Output formatting
addopts = 
    --strict-markers
    --strict-config
    --verbose
    --tb=short
    --color=yes
    --durations=10
    --maxfail=3

# Coverage settings
# Note: Coverage is configured separately in continuous_runner.py for flexibility

# Test markers (for categorizing tests)
markers =
    unit: Unit tests (fast, isolated)
    integration: Integration tests (slower, may use external services)
    agent: Agent-related tests (LangGraph/LangChain agents)
    database: Database operation tests
    tools: Tool functionality tests
    ui: User interface tests (Streamlit)
    slow: Tests that take significant time
    smoke: Basic functionality smoke tests

# Minimum Python version
minversion = 3.8

# Test timeout (per test)
timeout = 300

# Parallel execution
# Note: pytest-xdist is configured in requirements.txt for parallel test runs

# Warnings
filterwarnings =
    ignore::DeprecationWarning:langchain.*
    ignore::PendingDeprecationWarning:langchain.*
    ignore::UserWarning:streamlit.*
    ignore::FutureWarning:pydantic.*

# Environment variables for testing
env =
    AGENT_TYPE = langgraph
    DB_TYPE = mock
    TESTING = true

# Test order randomization (requires pytest-randomly)
# Uncomment if you want to randomize test order
# addopts = --randomly-seed=last